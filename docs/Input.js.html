<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Input.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Input.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Rorke Input
 *
 * @example
 *
 * async function update() {
 * 	if (game.input.keyIsDown('w')) {
		player.velocity.y = -100;
		player.animations.play('walkUp');
	} else if (game.input.keyIsDown('s')) {
		player.animations.play('walkDown');
		player.velocity.y = 100;
	} else {
		player.velocity.y = 0;
		player.animations.pause('walkUp');
		player.animations.pause('walkDown');
	}
	if (game.input.keyIsDown('a')) {
		player.velocity.x = -100;
		player.animations.play('walkLeft');
	} else if (game.input.keyIsDown('d')) {
		player.velocity.x = 100;
		player.animations.play('walkRight');
	} else {
		player.animations.pause('walkLeft');
		player.animations.pause('walkRight');
		player.velocity.x = 0;
	}
 * }
 */
export default class Input {
	constructor() {
		this.keyArray = 'a b c d e f g h i j k l m n o p q r s t u v w x y z left right down up shift tab space'.split(
			' ',
		);
		this.keyEnum = {};
		this.fillKeyEnum();
		this.keyArray = new Array(this.keyEnum.length);

		this.mouseX = 0;
		this.mouseY = 0;
	}

	fillKeyEnum() {
		for (let i = 0; i &lt; this.keyArray.length; i++) {
			this.keyEnum[this.keyArray[i]] = i;
		}
	}

	static onKeyPressed(key, fn) {
		let repeat = false;
		window.addEventListener('keyup', () => {
			repeat = false;
		});
		window.addEventListener('keydown', (e) => {
			let newKeyName;
			if (e.key === 'ArrowLeft') {
				newKeyName = 'left';
			} else if (e.key === 'ArrowRight') {
				newKeyName = 'right';
			} else if (e.key === 'ArrowUp') {
				newKeyName = 'up';
			} else if (e.key === 'ArrowDown') {
				newKeyName = 'down';
			} else {
				newKeyName = e.key;
			}
			if (!repeat &amp;&amp; newKeyName === key) {
				repeat = true;
				const callbackObject = {
					key,
					code: e.keyCode,
				};
				fn(callbackObject);
			}
		});
	}

	keyIsDown(key) {
		window.addEventListener('keydown', (e) => {
			this.keyDownHelper(e, key);
		});
		window.addEventListener('keyup', (e) => {
			this.keyUpHelper(e, key);
		});
		return this.keyArray[this.keyEnum[key]];
	}

	keyDownHelper(e, key) {
		let newKeyName;
		if (e.key === 'ArrowLeft') {
			newKeyName = 'left';
		} else if (e.key === 'ArrowRight') {
			newKeyName = 'right';
		} else if (e.key === 'ArrowUp') {
			newKeyName = 'up';
		} else if (e.key === 'ArrowDown') {
			newKeyName = 'down';
		} else if (e.key === ' ') {
			newKeyName = 'space';
		} else {
			newKeyName = e.key;
		}
		if (newKeyName === key) this.keyArray[this.keyEnum[key]] = true;
	}

	keyUpHelper(e, key) {
		let newKeyName;
		if (e.key === 'ArrowLeft') {
			newKeyName = 'left';
		} else if (e.key === 'ArrowRight') {
			newKeyName = 'right';
		} else if (e.key === 'ArrowUp') {
			newKeyName = 'up';
		} else if (e.key === 'ArrowDown') {
			newKeyName = 'down';
		} else if (e.key === ' ') {
			newKeyName = 'space';
		} else {
			newKeyName = e.key;
		}
		if (newKeyName === key) this.keyArray[this.keyEnum[key]] = false;
	}
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Input.html">Input</a></li><li><a href="Rorke.html">Rorke</a></li><li><a href="Sprite.html">Sprite</a></li><li><a href="Spritesheet.html">Spritesheet</a></li><li><a href="Text.html">Text</a></li><li><a href="Texture.html">Texture</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Mon Nov 25 2019 00:00:53 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
