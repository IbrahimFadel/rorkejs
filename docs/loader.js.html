<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: loader.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: loader.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

import { Loader as PixiLoader } from 'pixi.js';

/**
 * Loader class
 *
 * @class Loader
 */
export default class Loader extends PixiLoader {
	constructor() {
		super();
		this.rorkeResources = [];
	}

	/**
	 * Queue a texture to be loaded by Pixi
	 * @param {string} name Name of texture
	 * @param {string} path Path to texture
	 */
	async addTextureToLoadQueue(name, path) {
		this.add(name, path);
		this.rorkeResources.push({ name, options: undefined });
	}

	/**
	 * Queue a spritesheet to be loaded by Pixi
	 * @param {string} name Name of spritesheet
	 * @param {string} path Path to spritesheet
	 */
	async addSpritesheetToLoadQueue(name, path, options) {
		this.add(name, path);
		this.rorkeResources.push({ name, options });
	}

	/**
	 * Splite a spritesheet into an array of tiles
	 * @param {string} spritesheet Path to spritesheet
	 * @param {object} options Options for splitting the spritesheet -- tileW(width), tileH(height), numTiles
	 */
	async splitSpritesheetIntoTiles(spritesheet, options) {
		const can = document.createElement('canvas');
		can.width = options.tileW;
		can.height = options.tileH;
		const context = can.getContext('2d');
		const img = new Image();
		img.src = spritesheet.src;
		let tileUrls = [];
		img.addEventListener(
			'load',
			await (() => {
				const spritesheetWidth = img.width;
				let xdist = 0;
				let ydist = 0;
				let x = 0;
				let y = 0;
				for (let i = 0; i &lt; options.numTiles; i++) {
					if (x >= spritesheetWidth / options.tileW) {
						x = 0;
						xdist = 0;
						y++;
					}
					xdist = x * options.tileW;
					ydist = y * options.tileH;

					context.drawImage(
						img,
						xdist,
						ydist,
						options.tileW,
						options.tileH,
						0,
						0,
						options.tileW,
						options.tileH,
					);
					const url = can.toDataURL();
					tileUrls.push(url);
					context.clearRect(0, 0, can.width, can.height);
					x++;
				}
			})(),
		);

		return tileUrls;
	}
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Loader.html">Loader</a></li><li><a href="Physics.html">Physics</a></li><li><a href="Rorke.html">Rorke</a></li><li><a href="Sprite.html">Sprite</a></li></ul><h3>Global</h3><ul><li><a href="global.html#SPRITE_TYPES">SPRITE_TYPES</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Sat Aug 01 2020 21:21:40 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
